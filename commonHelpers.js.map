{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from \"axios\";\n\nimport { elem, word, showLoading, page, limit } from \"../main\";\n\nexport async function fetchingFrom() {\n\n  const params = new URLSearchParams({\n    key: '42957626-41f27679caf00334274850a6e',\n    q: word,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: page,\n    per_page: limit,\n  });\n\n  const response = await axios.get(`https://pixabay.com/api/?${params}`);\n\n  showLoading();\n\n  return response.data;\n};\n\n\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { elem, lightbox, displayToast } from \"../main\";\n\nexport function render(data) {\n  if (data.hits.length === 0) {\n    displayToast(\"Sorry, there are no images matching your search query. Please try again!\");\n  }\n  else {\n    elem.gallery.innerHTML = '';\n    const images = data.hits;\n\n    const markup = images.map(image => `<li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                  <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n                </a>\n                <div class=\"stats\">\n                  <p class=\"text\">Likes<br/>${image.likes}</p>\n                  <p class=\"text\">Views<br/>${image.views}</p>\n                  <p class=\"text\">Comments<br/>${image.comments}</p>\n                  <p class=\"text\">Downloads<br/>${image.downloads}</p>\n                </div>\n              </li>`)\n      .join('');\n    elem.gallery.insertAdjacentHTML('beforeend', markup);\n\n    lightbox.refresh();\n  }\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport axios from \"axios\";\n\nimport { fetchingFrom } from \"./js/pixabay-api\";\nimport { render } from \"./js/render-functions\";\n\nexport let page = 1;\nexport let limit = 15;\nexport const elem = {\n  gallery: document.querySelector('.gallery'),\n  form: document.querySelector('.form'),\n  wordInput: document.querySelector('.input'),\n  loader: document.querySelector('.loader'),\n  button: document.querySelector('.btn-load'),\n};\n\nexport const lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: \"alt\",\n  captionDelay: 250,\n  overlay: true,\n  overlayOpacity: 0.7,\n});\n\nexport let word = '';\n\nhideLoading();\nhideButton();\n\nelem.form.addEventListener(\"submit\", loadImages);\nelem.button.addEventListener(\"click\", loadPages);\n\nfunction loadImages(e) {\n  e.preventDefault();\n\n  elem.gallery.innerHTML = '';\n  word = elem.wordInput.value.trim();\n\n  if (word !== '') {\n    loadPages();\n  }\n  else {\n    displayToast(\"Please complete the field!\")\n  }\n};\n\nasync function loadPages() {\n  const images = await fetchingFrom(word);\n  const totalPages = Math.ceil(images.totalHits / limit);\n  if (page >= totalPages) {\n    displayToast(\"We're sorry, but you've reached the end of search results.\");\n  }\n  else {\n    try {\n      const api = await fetchingFrom(word);\n      render(api);\n      hideLoading();\n\n      page += 1;\n\n      if (page > 1) {\n        showButton();\n      }\n    }\n    catch (error) {\n      console.log(error);\n    }\n  }\n  elem.form.reset();\n};\n\n\n\nexport function displayToast(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    position: 'topRight',\n  });\n}\n\nexport function showLoading() {\n  elem.loader.style.display = 'block';\n}\n\nfunction hideLoading() {\n  elem.loader.style.display = 'none';\n}\n\nexport function showButton() {\n  elem.button.style.display = 'block';\n}\n\nfunction hideButton() {\n  elem.button.style.display = 'none';\n}"],"names":["fetchingFrom","params","word","page","limit","response","axios","showLoading","render","data","displayToast","elem","markup","image","lightbox","SimpleLightbox","hideLoading","hideButton","loadImages","loadPages","e","images","totalPages","api","showButton","error","message","iziToast"],"mappings":"owBAKO,eAAeA,GAAe,CAEnC,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAK,qCACL,EAAGC,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAUC,CACd,CAAG,EAEKC,EAAW,MAAMC,EAAM,IAAI,4BAA4BL,CAAM,EAAE,EAErE,OAAAM,IAEOF,EAAS,IAClB,CCdO,SAASG,EAAOC,EAAM,CAC3B,GAAIA,EAAK,KAAK,SAAW,EACvBC,EAAa,0EAA0E,MAEpF,CACHC,EAAK,QAAQ,UAAY,GAGzB,MAAMC,EAFSH,EAAK,KAEE,IAAII,GAAS;AAAA,gDACSA,EAAM,aAAa;AAAA,oDACfA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,8CAG5CA,EAAM,KAAK;AAAA,8CACXA,EAAM,KAAK;AAAA,iDACRA,EAAM,QAAQ;AAAA,kDACbA,EAAM,SAAS;AAAA;AAAA,oBAE7C,EACb,KAAK,EAAE,EACVF,EAAK,QAAQ,mBAAmB,YAAaC,CAAM,EAEnDE,EAAS,QAAO,CACjB,CACH,CCrBO,IAAIX,EAAO,EACPC,EAAQ,GACZ,MAAMO,EAAO,CAClB,QAAS,SAAS,cAAc,UAAU,EAC1C,KAAM,SAAS,cAAc,OAAO,EACpC,UAAW,SAAS,cAAc,QAAQ,EAC1C,OAAQ,SAAS,cAAc,SAAS,EACxC,OAAQ,SAAS,cAAc,WAAW,CAC5C,EAEaG,EAAW,IAAIC,EAAe,gBAAiB,CAC1D,aAAc,MACd,aAAc,IACd,QAAS,GACT,eAAgB,EAClB,CAAC,EAEM,IAAIb,EAAO,GAElBc,IACAC,IAEAN,EAAK,KAAK,iBAAiB,SAAUO,CAAU,EAC/CP,EAAK,OAAO,iBAAiB,QAASQ,CAAS,EAE/C,SAASD,EAAWE,EAAG,CACrBA,EAAE,eAAc,EAEhBT,EAAK,QAAQ,UAAY,GACzBT,EAAOS,EAAK,UAAU,MAAM,KAAI,EAE5BT,IAAS,GACXiB,IAGAT,EAAa,4BAA4B,CAE7C,CAEA,eAAeS,GAAY,CACzB,MAAME,EAAS,MAAMrB,EAAiB,EAChCsB,EAAa,KAAK,KAAKD,EAAO,UAAYjB,CAAK,EACrD,GAAID,GAAQmB,EACVZ,EAAa,4DAA4D,MAGzE,IAAI,CACF,MAAMa,EAAM,MAAMvB,EAAaE,CAAI,EACnCM,EAAOe,CAAG,EACVP,IAEAb,GAAQ,EAEJA,EAAO,GACTqB,GAEH,OACMC,EAAO,CACZ,QAAQ,IAAIA,CAAK,CAClB,CAEHd,EAAK,KAAK,OACZ,CAIO,SAASD,EAAagB,EAAS,CACpCC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,EACT,SAAU,UACd,CAAG,CACH,CAEO,SAASnB,GAAc,CAC5BI,EAAK,OAAO,MAAM,QAAU,OAC9B,CAEA,SAASK,GAAc,CACrBL,EAAK,OAAO,MAAM,QAAU,MAC9B,CAEO,SAASa,GAAa,CAC3Bb,EAAK,OAAO,MAAM,QAAU,OAC9B,CAEA,SAASM,GAAa,CACpBN,EAAK,OAAO,MAAM,QAAU,MAC9B"}